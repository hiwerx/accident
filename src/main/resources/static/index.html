<!DOCTYPE html>
<html lang="zh" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>首页</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700,800|Roboto:400,500,700" rel="stylesheet">
    <!-- Theme CSS -->
    <link type="text/css" href="./assets/css/theme.css" rel="stylesheet">
<!--    <link rel="stylesheet" href="https://unpkg.com/@tabler/core@latest/dist/css/tabler.min.css">-->
    <link rel="stylesheet" href="./assets/vendor/bootstrap/css/bootstrap.min.css">
    <!-- fontawesome6 CSS -->
    <link type="text/css" href="./assets/vendor/fontawesome/css/all.min.css" rel="stylesheet">
    <!-- Core -->
    <script src="./assets/vendor/jquery/jquery.min.js"></script>
    <script src="./assets/vendor/popper/popper.min.js"></script>
    <script src="./assets/js/bootstrap/bootstrap.min.js"></script>
    <!-- Page plugins -->
    <script src="./assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script src="./assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.min.js"></script>
    <script src="./assets/vendor/input-mask/input-mask.min.js"></script>
    <script src="./assets/vendor/nouislider/js/nouislider.min.js"></script>
    <script src="./assets/vendor/textarea-autosize/textarea-autosize.min.js"></script>
    <!-- Theme JS -->
    <script src="./assets/js/theme.js"></script>

<!--    <script src="https://unpkg.com/@tabler/core@latest/dist/js/tabler.min.js"></script>-->
    <!--引入Vue框架-->
    <script src="./assets/vendor/vue/dist/vue.js"></script>
    <!--引入axios框架-->
    <script src="./assets/vendor/axios/dist/axios.min.js"></script>
    <script src="./assets/js/myUtil.js"></script>

</head>
<style>
    p {
        margin: 0;
        text-indent: 4ch;
    }
    .refer{
        font-size: 90%;
    }
</style>
<body  onbeforeunload="cacheReqData()">

<div id="acctPwdId" class="container-fluid">

<!--    月份搜索，日期区间搜索，关键词搜索，关键词，延升地区搜索-->

    <div id="accidentId" class="row">
        <div class="col-xl-8 offset-xl-2">

<!--            <div class="mb-2">-->
<!--            <div class="btn-group">-->
<!--                <button type="button" class="btn btn-light">当月</button>-->
<!--                <button type="button" class="btn btn-light">上月</button>-->
<!--                <button type="button" class="btn btn-light">近三月</button>-->
<!--                <button type="button" class="btn btn-light">近半年</button>-->
<!--                <button type="button" class="btn btn-light">今年</button>-->
<!--            </div>-->
<!--            </div>-->
            <br>
            <div v-if="searchParam.checkedDate==7"
                    class="mb-3 row">
                <div class="col-md-2">
                <span>自定义区间：</span>
                </div>
                <div class="col-md-10">
                <input type="date" v-model="searchParam.startDate" v-on:change="pageSearch(1)">
                <span>--</span>
                <input type="date" v-model="searchParam.endDate" v-on:change="pageSearch(1)">
                </div>
            </div>
            <div class="form-group sticky-top">

                <div class="input-group">
                    <div class="input-group-prepend">
                        <select class="selectpicker" name="checkedDate"
                                v-model="searchParam.checkedDate"
                                v-on:change="pageSearch(1)">
                            <option value="1">全部</option>
                            <option value="2">当月</option>
                            <option value="3">上月至今</option>
                            <option value="4">近三月</option>
                            <option value="5">近半年</option>
                            <option value="6">今年来</option>
                            <option value="7">自定义</option>
                        </select>
                    </div>
                    <input type="text" class="form-control"  placeholder="搜索" v-model="searchParam.content" v-on:change="pageSearch(1)">
                    <div class="input-group-append">
                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                    </div>
                </div>
            </div>

            <div v-if="checkedTagFlag">
                <span>标签：</span>
                <span  v-text="checkedTag"></span>
                <a href="#" v-on:click="clearTag()" ><i class="fa-solid fa-delete-left"></i></a>
            </div>

            <template v-for="(a,index) in page.records">
            <div class="card ">
                <div class="card-header">

                    <div class="row align-items-center">
                        <div class="col-7">
                            <span v-text="a.title"></span>
                        </div>
                        <div class="col-5">
                            <div class="card-icon-actions text-right">
                                <span v-text="a.date"></span>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="mb-2">
<!--                        :href="'javascript:accidentApp.findDataByTagId('+t.id+','+t.tag+')'"-->
<!--                        <span class="text-left" v-for="(t,index) in a.tags" v-text="t.tag"> 泥石流</span>-->
                        <a v-for="(t,index) in a.tags" v-text="t.tag"
                            v-on:click="findDataByTagId(t.id,t.tag)"
                           href="#"

                              :class="'badge badge-pill mx-1 '+bagClass[index%6]">Primary</a>

                    </div>

                    <div class="mb-2">
                        <p class="mb-1" v-for="intro in a.introduces" v-text="intro"></p>
                    </div>

                    <div class="refer mb-2" >
                        <div v-if="a.deathNum>0"  class="mx-1 d-inline-block">
                            <span>死亡人数:</span>
                            <span v-text="a.deathNum">2</span>
                        </div>
                        <div v-if="a.missingNum>0" class="mx-1 d-inline-block">
                            <span>失联人数:</span>
                            <span v-text="a.missingNum">3</span>
                        </div>
                        <div v-if="a.injuryNum>0" class="mx-1 d-inline-block">
                            <span>受伤人数:</span>
                            <span v-text="a.injuryNum">1</span>
                        </div>
                    </div>


                    <!--            更新时间-->
                    <div class="mb-2 small text-right text-muted">
                        <span>更新日期：</span>
                        <span v-text="a.updateTime">2022-08-27 16:45:22</span>
                    </div>

                    <!--            参考-->
                    <div v-if="a.sourceUrls.length>0">
                        <span class="font-weight-bold">参考</span>
                    </div>
                    <div class="refer" >

                        <div  v-for="(s,index) in a.sourceUrls">
                            <span v-text="(index+1)+'.'"></span>
                            <a v-bind:href="s.url" v-bind:title="s.urlTitle"  target="_blank" v-text="s.urlTitle">事故1</a>
                            <span v-text="s.channel">央视新闻</span>
                            <span v-text="s.sourceDate">2022-08-27</span>
                        </div>


                    </div>


                </div>
            </div>
                <br>
            </template>
<!--页码导航模块-->
            <nav v-if="page.pages>1" aria-label="Page navigation example">
                <ul class="pagination justify-content-center">
                    <li class="page-item" v-if="!page.firstPage"><a class="page-link" href="#"  v-on:click="pageSearch(1)">首页</i></a></li>

                    <li class="page-item" v-if="page.hasPreviousPage"><a class="page-link" href="#"  v-on:click="pageSearch(page.prePage)"><i class="fas fa-angle-left"></i></a></li>
                    <li v-for="p in page.pageNums" v-bind:class="'page-item '+(p==page.current?'active':'d-none d-md-block')" ><a class="page-link" href="#" v-on:click="pageSearch(p)" v-text="p">1</a></li>
                    <!--                    <li class="page-item active"><a class="page-link" href="#">2</a></li>-->

                    <li class="page-item" v-if="page.hasNextPage"><a class="page-link " href="#" v-on:click="pageSearch(page.nextPage)"><i class="fas fa-angle-right"  ></i></a></li>

                    <li class="page-item" v-if="!page.lastPage"><a class="page-link" href="#"  v-on:click="pageSearch(page.pages)">尾页</i></a></li>

                    <li ><a class="page-link  d-none d-md-block" v-on:click="targetPageSearch">调转至</a></li>
                    <li ><input class="page-link  d-none d-md-block" v-model="targetPage" v-on:change="targetPageSearch" size="1" type="text"></li>
                </ul>
            </nav>

        </div>

    </div>
    </div>
</div>
</body>
<!--<script src="./js/java/index.js"></script>-->
<script src="./js/php/index.js"></script>

</html>